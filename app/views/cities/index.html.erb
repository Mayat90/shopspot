<%= render 'shared/navbar' %>
<div class="tablecontainer">
  <div class="tabletitle">
    <h1>Nearest Cities</h1>
    <p>Here are the most suitable cities considering your needs</p>
    <p><i class="fa fa-undo" aria-hidden="true"></i><%= link_to 'Back', :back %></p></div>

  <div class="tablecontent">
    <table class=".table table-sm table-hover">
      <thead>
        <th></th>
        <th>Name</th>
        <th>Distance</th>
        <th>Population</th>
        <th>Density</th>
        <th>Men /</br>Women</th>
        <th>Age</br>(-25 / 25-64 / +65)</th>
        <th>Unemployment</th>
        <th>Revenues</th>
      </thead>
    <% x = 0 %>
    <% @cities.each do |city| %>
      <tbody>
        <tr>
          <% x = x + 1 %>
          <th scope="row"><%= x %></th>
          <td><%= city[:name] %></td>
          <td><%= Geocoder::Calculations.distance_between([@query.latitude,@query.longitude], [city[:latitude],city[:longitude]]).round(1) %> km</td>
          <td><%= city[:population] %></td>
          <td><%= (city[:population] / city[:area]).round %></td>
          <td><%= (city[:sexe][:homme].to_f*100).round%> % / <%= (city[:sexe][:femme].to_f*100).round%> % </td>
          <td><%= (city[:age][:jeune].to_f*100).round%> % / <%= (city[:age][:adulte].to_f*100).round%> % / <%= (city[:age][:senior].to_f*100).round %> % </td>
          <td><%= (city[:chomage] * 100).round %> % </td>
          <td><%= city[:revenu].round %> â‚¬ </td>
        </tr>
      </tbody>
    <% end  %>
    </table>
  </div>
</div>
<%= render 'shared/footer' %>